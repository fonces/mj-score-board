(function(){"use strict";var e={1647:function(e,l,o){var t=o(9242),a=o(8970),r=o(3396);function n(e,l,o,t,a,n){const s=(0,r.up)("ScoreTable");return(0,r.wg)(),(0,r.j4)(s)}const s=()=>{const e=["resize","orientationchange"],l=()=>{const e=.01*window.innerHeight;document.documentElement.style.setProperty("--vh",`${e}px`)};(0,r.wF)((()=>e.map((e=>window.addEventListener(e,l))))),(0,r.Ah)((()=>e.map((e=>window.removeEventListener(e,l))))),l()};var i=o(7139);const d=e=>((0,r.dD)("data-v-394c978f"),e=e(),(0,r.Cn)(),e),u=d((()=>(0,r._)("th",null,null,-1))),c=["onClick"],p=d((()=>(0,r._)("th",null,"チップ",-1))),m=d((()=>(0,r._)("th",null,"合計",-1)));function f(e,l,o,t,a,n){const s=(0,r.up)("Clamp"),d=(0,r.up)("EditPlayerModal"),f=(0,r.up)("Animate"),y=(0,r.up)("EditScoreModal"),g=(0,r.up)("EditChipModal"),h=(0,r.up)("ResultModal");return(0,r.wg)(),(0,r.iD)(r.HY,null,[(0,r._)("table",null,[(0,r._)("thead",null,[(0,r._)("tr",{class:"head",onClick:l[0]||(l[0]=e=>t.modal.player=!0)},[u,((0,r.wg)(!0),(0,r.iD)(r.HY,null,(0,r.Ko)(t.model.players,((e,l)=>((0,r.wg)(),(0,r.iD)("th",{key:l},[(0,r.Wm)(s,null,{default:(0,r.w5)((()=>[(0,r.Uk)((0,i.zw)(e),1)])),_:2},1024)])))),128))])]),(0,r._)("tbody",null,[((0,r.wg)(!0),(0,r.iD)(r.HY,null,(0,r.Ko)(t.model.scores,((e,l)=>((0,r.wg)(),(0,r.iD)("tr",{key:l,class:(0,i.C_)(["body",{diff:t.sum(e)}]),onClick:e=>(t.modal.score=!0)&&(t.modal.scoreIndex=l)},[(0,r._)("th",null,(0,i.zw)(l+1)+"回戦",1),((0,r.wg)(!0),(0,r.iD)(r.HY,null,(0,r.Ko)(e,((e,l)=>((0,r.wg)(),(0,r.iD)("td",{key:l},(0,i.zw)(t.toFormat(e)),1)))),128))],10,c)))),128)),(0,r._)("tr",{class:(0,i.C_)(["body",{diff:t.sum(t.model.chips)}]),onClick:l[1]||(l[1]=e=>t.modal.chip=!0)},[p,((0,r.wg)(!0),(0,r.iD)(r.HY,null,(0,r.Ko)(t.model.chips,((e,l)=>((0,r.wg)(),(0,r.iD)("td",{key:l},(0,i.zw)(t.toSymbol(e))+"枚 ",1)))),128))],2)]),(0,r._)("tfoot",null,[(0,r._)("tr",{class:(0,i.C_)(["foot summary",{diff:t.sum(t.summaries)}]),onClick:l[2]||(l[2]=e=>t.modal.result=!0)},[m,((0,r.wg)(!0),(0,r.iD)(r.HY,null,(0,r.Ko)(t.summaries,((e,l)=>((0,r.wg)(),(0,r.iD)("td",{class:"bold",key:l},(0,i.zw)(t.toFormat(e)),1)))),128))],2)])]),((0,r.wg)(),(0,r.j4)(r.lR,{to:"#modal"},[t.isEditable?((0,r.wg)(),(0,r.iD)(r.HY,{key:0},[(0,r.Wm)(f,{name:t.ANIMATION.SLIDE_DOWN},{default:(0,r.w5)((()=>[t.modal.player?((0,r.wg)(),(0,r.j4)(d,{key:0,players:t.model.players,onSave:t.onSaveEditPlayer,onClose:l[3]||(l[3]=e=>t.modal.player=!1)},null,8,["players","onSave"])):(0,r.kq)("",!0)])),_:1},8,["name"]),(0,r.Wm)(f,{name:t.ANIMATION.SLIDE_LEFT},{default:(0,r.w5)((()=>[t.modal.score?((0,r.wg)(),(0,r.j4)(y,{key:0,players:t.model.players,score:t.model.scores[t.modal.scoreIndex],"score-index":t.modal.scoreIndex,onSave:t.onSaveEditScore,onClose:l[4]||(l[4]=e=>t.modal.score=!1)},null,8,["players","score","score-index","onSave"])):(0,r.kq)("",!0)])),_:1},8,["name"]),(0,r.Wm)(f,{name:t.ANIMATION.SLIDE_LEFT},{default:(0,r.w5)((()=>[t.modal.chip?((0,r.wg)(),(0,r.j4)(g,{key:0,players:t.model.players,chips:t.model.chips,"chip-rate":t.model.chipRate,onSave:t.onSaveEditChip,onClose:l[5]||(l[5]=e=>t.modal.chip=!1)},null,8,["players","chips","chip-rate","onSave"])):(0,r.kq)("",!0)])),_:1},8,["name"]),(0,r.Wm)(f,{name:t.ANIMATION.SLIDE_UP},{default:(0,r.w5)((()=>[t.modal.result?((0,r.wg)(),(0,r.j4)(h,{key:0,players:t.model.players,scores:t.model.scores,chips:t.model.chips,"chip-rate":t.model.chipRate,onReset:t.onReset,onClose:l[6]||(l[6]=e=>t.modal.result=!1)},null,8,["players","scores","chips","chip-rate","onReset"])):(0,r.kq)("",!0)])),_:1},8,["name"])],64)):(0,r.kq)("",!0)]))],64)}o(1703),o(6699);var y=o(4870);const g=(e,l=0)=>Array(e).fill(l),h=(e,l)=>Array(e.length/l).fill().map(((o,t)=>e.slice(t*l,(t+1)*l))),w=e=>e.reduce(((e,l)=>e+l),0),v=e=>`${0<e?"":e<0?"▲":""}${Math.abs(e)}`,_=e=>`${0<e?"+":e<0?"-":""}${Math.abs(e)}`,k=(e,{props:l,target:o})=>{const a=(0,y.iH)(null);return new Promise((n=>{a.value=(0,t.ri)({render:()=>(0,r.h)(e,{...l,resolve:n})}),a.value.mount(o)})).then((e=>(a.value.unmount(),e)))},b={resolve:{type:Function,required:!0}};function C(e,l,o,a,n,s){return(0,r.wg)(),(0,r.j4)(t.uT,{name:o.name},{default:(0,r.w5)((()=>[(0,r.WI)(e.$slots,"default",{},void 0,!0)])),_:3},8,["name"])}const I={SLIDE_UP:"slide-up",SLIDE_RIGHT:"slide-right",SLIDE_DOWN:"slide-down",SLIDE_LEFT:"slide-left"};var W={name:"Animate",props:{name:{type:String,required:!0,validator:e=>Object.values(I).includes(e)}}},S=o(89);const x=(0,S.Z)(W,[["render",C],["__scopeId","data-v-ff0384f8"]]);var F=x;function B(e,l,o,t,a,n){return(0,r.wg)(),(0,r.iD)("span",{class:"clamp",style:(0,i.j5)({"-webkit-line-clamp":o.line})},[(0,r.WI)(e.$slots,"default",{},void 0,!0)],4)}var R={name:"Clamp",props:{line:{type:Number,default:1}}};const D=(0,S.Z)(R,[["render",B],["__scopeId","data-v-038d753a"]]);var j=D;const A={class:"dialog"},U=(0,r.Uk)("キャンセル"),q=(0,r.Uk)("OK");function V(e,l,o,t,a,n){const s=(0,r.up)("AlertOutlineIcon"),d=(0,r.up)("AlertOctagramIcon"),u=(0,r.up)("Label"),c=(0,r.up)("Button"),p=(0,r.up)("Flex"),m=(0,r.up)("Grid");return(0,r.wg)(),(0,r.iD)("div",A,[(0,r.Wm)(m,{class:"card"},{default:(0,r.w5)((()=>["warning"===o.type?((0,r.wg)(),(0,r.j4)(s,{key:0,size:32})):(0,r.kq)("",!0),"error"===o.type?((0,r.wg)(),(0,r.j4)(d,{key:1,size:32})):(0,r.kq)("",!0),(0,r.Wm)(u,{bold:"",class:"message"},{default:(0,r.w5)((()=>[(0,r.Uk)((0,i.zw)(o.message),1)])),_:1}),(0,r.Wm)(p,{justify:"center",gap:"16px"},{default:(0,r.w5)((()=>[o.cancellable?((0,r.wg)(),(0,r.j4)(c,{key:0,onClick:l[0]||(l[0]=l=>e.resolve(!1))},{default:(0,r.w5)((()=>[U])),_:1})):(0,r.kq)("",!0),(0,r.Wm)(c,{onClick:l[1]||(l[1]=l=>e.resolve(!0)),primary:""},{default:(0,r.w5)((()=>[q])),_:1})])),_:1})])),_:1})])}var E=o(4966),M=o(7073);function T(e,l,o,t,a,n){return(0,r.wg)(),(0,r.iD)("button",(0,r.dG)(e.$attrs,{type:"button",class:["button",{primary:o.primary,small:o.small,flat:o.flat}]}),[(0,r.WI)(e.$slots,"default",{},void 0,!0)],16)}var L={name:"Button",inheritAttrs:!1,props:{primary:{type:Boolean},small:{type:Boolean},flat:{type:Boolean}}};const N=(0,S.Z)(L,[["render",T],["__scopeId","data-v-d85ff748"]]);var Z=N;function O(e,l,o,t,a,n){return(0,r.wg)(),(0,r.iD)("div",{class:"flex",style:(0,i.j5)({alignItems:o.align,flexDirection:o.direction,gap:o.gap,justifyContent:o.justify})},[(0,r.WI)(e.$slots,"default",{},void 0,!0)],4)}var $={name:"Flex",props:{align:{type:String,default:"center"},direction:{type:String,default:"row"},gap:{type:String},justify:{type:String,default:"space-between"}}};const P=(0,S.Z)($,[["render",O],["__scopeId","data-v-b2e69e92"]]);var G=P;function z(e,l,o,t,a,n){return(0,r.wg)(),(0,r.iD)("div",{class:"grid",style:(0,i.j5)({gap:o.gap,gridAutoFlow:o.direction})},[(0,r.WI)(e.$slots,"default",{},void 0,!0)],4)}var H={name:"Grid",props:{gap:{type:String,default:"16px"},direction:{type:String,default:"row"}}};const Y=(0,S.Z)(H,[["render",z],["__scopeId","data-v-433b90a5"]]);var K=Y;function J(e,l,o,t,a,n){return(0,r.wg)(),(0,r.iD)("label",{class:(0,i.C_)(["label",{bold:o.bold,strong:o.strong,error:o.error}])},[(0,r.WI)(e.$slots,"default")],2)}var X={name:"Label",props:{bold:{type:Boolean,default:!1},strong:{type:Boolean,default:!1},error:{type:Boolean,default:!1}}};const Q=(0,S.Z)(X,[["render",J]]);var ee=Q,le={name:"Dialog",components:{AlertOutlineIcon:E.Z,AlertOctagramIcon:M.Z,Button:Z,Flex:G,Grid:K,Label:ee},props:{...b,type:{type:String,validator:e=>["warning","error"].includes(e)},message:{type:String,required:!0},cancellable:{type:Boolean,default:!1}}};const oe=(0,S.Z)(le,[["render",V],["__scopeId","data-v-50d418a7"]]);var te=oe;const ae=(0,r.Uk)("1枚"),re=(0,r.Uk)("点相当"),ne=(0,r.Uk)("枚"),se=(0,r.Uk)(" 自動入力 "),ie=(0,r.Uk)("キャンセル"),de=(0,r.Uk)("保存");function ue(e,l,o,t,a,n){const s=(0,r.up)("RestoreIcon"),d=(0,r.up)("Button"),u=(0,r.up)("Label"),c=(0,r.up)("Flex"),p=(0,r.up)("TextInput"),m=(0,r.up)("FormField"),f=(0,r.up)("FormGroup"),y=(0,r.up)("Grid"),g=(0,r.up)("ModalBase");return(0,r.wg)(),(0,r.j4)(g,{class:"edit-chips-modal",title:"チップ編集",onClose:t.onClose},{footer:(0,r.w5)((()=>[(0,r.Wm)(d,{onClick:t.onClose},{default:(0,r.w5)((()=>[ie])),_:1},8,["onClick"]),(0,r.Wm)(d,{primary:"",disabled:t.diff,onClick:t.onSave},{default:(0,r.w5)((()=>[de])),_:1},8,["disabled","onClick"])])),default:(0,r.w5)((()=>[(0,r.Wm)(y,{gap:"24px"},{default:(0,r.w5)((()=>[(0,r.Wm)(c,{direction:"row-reverse"},{default:(0,r.w5)((()=>[(0,r.Wm)(d,{flat:"",onClick:t.onClear},{default:(0,r.w5)((()=>[(0,r.Wm)(s)])),_:1},8,["onClick"]),t.diff?((0,r.wg)(),(0,r.j4)(u,{key:0,bold:"",error:""},{default:(0,r.w5)((()=>[(0,r.Uk)((0,i.zw)(`${t.diff}枚差分があります`),1)])),_:1})):(0,r.kq)("",!0)])),_:1}),(0,r.Wm)(f,{title:"チップ"},{default:(0,r.w5)((()=>[(0,r.Wm)(m,{columns:["max-content","1fr","max-content"]},{default:(0,r.w5)((()=>[(0,r.Wm)(u,null,{default:(0,r.w5)((()=>[ae])),_:1}),(0,r.Wm)(p,{modelValue:t.model.chipRate,"onUpdate:modelValue":l[0]||(l[0]=e=>t.model.chipRate=e),modelModifiers:{number:!0},type:"tel",align:"right",onBlur:t.onBlurChipRate},null,8,["modelValue","onBlur"]),(0,r.Wm)(u,null,{default:(0,r.w5)((()=>[re])),_:1})])),_:1})])),_:1}),(0,r.Wm)(y,null,{default:(0,r.w5)((()=>[((0,r.wg)(!0),(0,r.iD)(r.HY,null,(0,r.Ko)(o.players,((e,l)=>((0,r.wg)(),(0,r.j4)(f,{key:l,title:e},{default:(0,r.w5)((()=>[(0,r.Wm)(m,null,{default:(0,r.w5)((()=>[(0,r.Wm)(p,{modelValue:t.model.chips[l],"onUpdate:modelValue":e=>t.model.chips[l]=e,modelModifiers:{number:!0},align:"right",onBlur:e=>t.onBlur(l)},null,8,["modelValue","onUpdate:modelValue","onBlur"]),(0,r.Wm)(u,null,{default:(0,r.w5)((()=>[ne])),_:1}),0===t.model.chips[l]&&t.diff?((0,r.wg)(),(0,r.j4)(d,{key:0,small:"",onClick:e=>t.onAutoComplete(l)},{default:(0,r.w5)((()=>[se])),_:2},1032,["onClick"])):(0,r.kq)("",!0)])),_:2},1024)])),_:2},1032,["title"])))),128))])),_:1})])),_:1})])),_:1},8,["onClose"])}var ce=o(34);function pe(e,l,o,t,a,n){return(0,r.wg)(),(0,r.iD)("div",{class:"form-field",style:(0,i.j5)({gridTemplateColumns:t.gridTemplateColumns})},[(0,r.WI)(e.$slots,"default")],4)}var me={name:"FormField",props:{columns:{type:Array,default:()=>["1fr","max-content"]}},setup(e){return{gridTemplateColumns:(0,r.Fl)((()=>e.columns.join(" ")))}}};const fe=(0,S.Z)(me,[["render",pe]]);var ye=fe;const ge=["value"];function he(e,l,o,t,a,n){return(0,r.wg)(),(0,r.iD)("input",(0,r.dG)({type:"text",class:"text-input"},e.$attrs,{style:{textAlign:o.align},value:o.modelValue,onInput:l[0]||(l[0]=l=>e.$emit("update:modelValue",l.target.value)),onFocus:l[1]||(l[1]=(...e)=>t.onFocus&&t.onFocus(...e))}),null,16,ge)}var we={name:"TextInput",inheritAttrs:!1,emits:["update:modelValue"],props:{modelValue:{type:[String,Number],required:!0},align:{type:String,default:"left",validator:e=>["left","center","right"].includes(e)}},setup(e){return{onFocus:l=>l.target.setSelectionRange(0,String(e.modelValue).length)}}};const ve=(0,S.Z)(we,[["render",he],["__scopeId","data-v-67f8de12"]]);var _e=ve;const ke={class:"form-group"},be={class:"title bold"};function Ce(e,l,o,t,a,n){return(0,r.wg)(),(0,r.iD)("div",ke,[(0,r._)("div",be,(0,i.zw)(o.title),1),(0,r.WI)(e.$slots,"default",{},void 0,!0)])}var Ie={name:"FormGroup",props:{title:{type:String,required:!0}}};const We=(0,S.Z)(Ie,[["render",Ce],["__scopeId","data-v-2cad4721"]]);var Se=We;const xe={class:"modal-base"},Fe={class:"container"},Be={class:"title bold"};function Re(e,l,o,t,a,n){const s=(0,r.up)("CloseIcon"),d=(0,r.up)("Button");return(0,r.wg)(),(0,r.iD)("div",xe,[(0,r._)("div",Fe,[(0,r._)("header",null,[(0,r._)("div",Be,(0,i.zw)(o.title),1),(0,r.Wm)(d,{flat:"",onClick:l[0]||(l[0]=l=>e.$emit("close"))},{default:(0,r.w5)((()=>[(0,r.Wm)(s,{size:32})])),_:1})]),(0,r._)("main",null,[(0,r.WI)(e.$slots,"default",{},void 0,!0)]),(0,r._)("footer",null,[(0,r.WI)(e.$slots,"footer",{},void 0,!0)])])])}var De=o(320),je={name:"ModalBase",components:{CloseIcon:De.Z,Button:Z},props:{title:{type:String}}};const Ae=(0,S.Z)(je,[["render",Re],["__scopeId","data-v-65ce5b6f"]]);var Ue=Ae,qe={name:"EditChipModal",components:{RestoreIcon:ce.Z,Button:Z,FormField:ye,Flex:G,Grid:K,Label:ee,TextInput:_e,FormGroup:Se,ModalBase:Ue},props:{players:{type:Array,required:!0},chips:{type:Array,required:!0},chipRate:{type:Number,required:!0}},setup(e,{emit:l}){const o=(0,y.qj)({chips:[...e.chips],chipRate:e.chipRate}),t=(0,r.Fl)((()=>w(o.chips)));return{model:o,diff:t,onBlur:e=>!Number.isInteger(o.chips[e])&&(o.chips[e]=0),onBlurChipRate:()=>(!Number.isInteger(o.chipRate)||o.chipRate%1e3!==0)&&(o.chipRate=e.chipRate),onAutoComplete:e=>o.chips[e]-=t.value,onClear:()=>{o.chips=g(e.players.length),o.chipRate=5e3},onSave:()=>l("save",{...o,chips:[...o.chips]}),onClose:()=>l("close")}}};const Ve=(0,S.Z)(qe,[["render",ue]]);var Ee=Ve;const Me=(0,r.Uk)("キャンセル"),Te=(0,r.Uk)("保存");function Le(e,l,o,t,a,n){const s=(0,r.up)("TextInput"),d=(0,r.up)("TrashIcon"),u=(0,r.up)("Button"),c=(0,r.up)("FormField"),p=(0,r.up)("Grid"),m=(0,r.up)("ModalBase");return(0,r.wg)(),(0,r.j4)(m,{class:"edit-player-modal",title:"プレイヤー名編集",onClose:t.onClose},{footer:(0,r.w5)((()=>[(0,r.Wm)(u,{onClick:t.onClose},{default:(0,r.w5)((()=>[Me])),_:1},8,["onClick"]),(0,r.Wm)(u,{primary:"",onClick:t.onSave},{default:(0,r.w5)((()=>[Te])),_:1},8,["onClick"])])),default:(0,r.w5)((()=>[(0,r.Wm)(p,{gap:"24px"},{default:(0,r.w5)((()=>[(0,r.Wm)(p,null,{default:(0,r.w5)((()=>[((0,r.wg)(!0),(0,r.iD)(r.HY,null,(0,r.Ko)(t.model.players,((e,l)=>((0,r.wg)(),(0,r.j4)(c,{key:l},{default:(0,r.w5)((()=>[(0,r.Wm)(s,{modelValue:t.model.players[l],"onUpdate:modelValue":e=>t.model.players[l]=e,modelModifiers:{trim:!0},disabled:t.model.deleted.includes(l),placeholder:"Please player name..."},null,8,["modelValue","onUpdate:modelValue","disabled"]),(0,r.Wm)(u,{small:"",class:(0,i.C_)({undeletable:t.model.deleted.includes(l)||t.isLastIndex(l)}),onClick:e=>t.onDelete(l)},{default:(0,r.w5)((()=>[(0,r.Wm)(d)])),_:2},1032,["class","onClick"])])),_:2},1024)))),128))])),_:1})])),_:1})])),_:1},8,["onClose"])}var Ne=o(2756),Ze={name:"EditPlayerModal",components:{Button:Z,FormField:ye,Grid:K,TextInput:_e,TrashIcon:Ne.Z,ModalBase:Ue},props:{players:{type:Array,required:!0}},setup(e,{emit:l}){const o=(0,y.qj)({players:[...e.players,""],deleted:[]}),t=(0,r.Fl)((()=>o.players.length-1));return(0,r.YP)((()=>o.players[t.value]),(e=>e&&(o.players=[...o.players,""]))),{model:o,isLastIndex:e=>e===t.value,onDelete:e=>o.deleted=[...o.deleted,e],onSave:()=>l("save",{players:4<o.players.length?[...o.players].slice(0,-1):[...o.players],deleted:[...o.deleted]}),onClose:()=>l("close")}}};const Oe=(0,S.Z)(Ze,[["render",Le],["__scopeId","data-v-7a6062ed"]]);var $e=Oe;const Pe=(0,r.Uk)(" 自動入力 "),Ge=(0,r.Uk)("キャンセル"),ze=(0,r.Uk)("保存");function He(e,l,o,t,a,n){const s=(0,r.up)("RestoreIcon"),d=(0,r.up)("Button"),u=(0,r.up)("Label"),c=(0,r.up)("Flex"),p=(0,r.up)("TextInput"),m=(0,r.up)("FormField"),f=(0,r.up)("FormGroup"),y=(0,r.up)("Grid"),g=(0,r.up)("ModalBase");return(0,r.wg)(),(0,r.j4)(g,{class:"edit-score-modal",title:`スコア編集 - ${o.scoreIndex+1}回戦`,onClose:t.onClose},{footer:(0,r.w5)((()=>[(0,r.Wm)(d,{onClick:t.onClose},{default:(0,r.w5)((()=>[Ge])),_:1},8,["onClick"]),(0,r.Wm)(d,{primary:"",disabled:t.diff,onClick:t.onSave},{default:(0,r.w5)((()=>[ze])),_:1},8,["disabled","onClick"])])),default:(0,r.w5)((()=>[(0,r.Wm)(y,{gap:"24px"},{default:(0,r.w5)((()=>[(0,r.Wm)(c,{direction:"row-reverse"},{default:(0,r.w5)((()=>[(0,r.Wm)(d,{flat:"",onClick:t.onClear},{default:(0,r.w5)((()=>[(0,r.Wm)(s)])),_:1},8,["onClick"]),t.diff?((0,r.wg)(),(0,r.j4)(u,{key:0,bold:"",error:""},{default:(0,r.w5)((()=>[(0,r.Uk)((0,i.zw)(`${t.diff}ポイント差分があります`),1)])),_:1})):(0,r.kq)("",!0)])),_:1}),(0,r.Wm)(y,null,{default:(0,r.w5)((()=>[((0,r.wg)(!0),(0,r.iD)(r.HY,null,(0,r.Ko)(o.players,((e,l)=>((0,r.wg)(),(0,r.j4)(f,{key:l,title:e},{default:(0,r.w5)((()=>[(0,r.Wm)(m,null,{default:(0,r.w5)((()=>[(0,r.Wm)(p,{modelValue:t.model.score[l],"onUpdate:modelValue":e=>t.model.score[l]=e,modelModifiers:{number:!0,lazy:!0},align:"right",onBlur:e=>t.onBlur(l)},null,8,["modelValue","onUpdate:modelValue","onBlur"]),0===t.model.score[l]&&t.diff?((0,r.wg)(),(0,r.j4)(d,{key:0,small:"",onClick:e=>t.onAutoComplete(l)},{default:(0,r.w5)((()=>[Pe])),_:2},1032,["onClick"])):(0,r.kq)("",!0)])),_:2},1024)])),_:2},1032,["title"])))),128))])),_:1})])),_:1})])),_:1},8,["title","onClose"])}var Ye={name:"EditScoreModal",components:{RestoreIcon:ce.Z,Button:Z,FormField:ye,Flex:G,Grid:K,Label:ee,TextInput:_e,FormGroup:Se,ModalBase:Ue},props:{players:{type:Array,required:!0},score:{type:Array,required:!0},scoreIndex:{type:Number,required:!0}},setup(e,{emit:l}){const o=(0,y.qj)({score:[...e.score]}),t=(0,r.Fl)((()=>w(o.score)));return{model:o,diff:t,onBlur:e=>!Number.isInteger(o.score[e])&&(o.score[e]=0),onAutoComplete:e=>o.score[e]-=t.value,onClear:()=>o.score=g(e.players.length),onSave:()=>l("save",{score:[...o.score]}),onClose:()=>l("close")}}};const Ke=(0,S.Z)(Ye,[["render",He]]);var Je=Ke;const Xe=(0,r.Uk)("1000点"),Qe=(0,r.Uk)("円"),el=(0,r.Uk)("1枚"),ll=(0,r.Uk)("点相当"),ol=(0,r.Uk)("編集を許可する"),tl=(0,r.Uk)("キャンセル"),al=(0,r.Uk)("戦績クリア");function rl(e,l,o,t,a,n){const s=(0,r.up)("Label"),d=(0,r.up)("TextInput"),u=(0,r.up)("FormField"),c=(0,r.up)("FormGroup"),p=(0,r.up)("Switch"),m=(0,r.up)("ShareIcon"),f=(0,r.up)("Button"),y=(0,r.up)("DownloadIcon"),g=(0,r.up)("Grid"),h=(0,r.up)("ModalBase");return(0,r.wg)(),(0,r.j4)(h,{class:"result-modal",title:"結果",onClose:t.onClose},{footer:(0,r.w5)((()=>[(0,r.Wm)(f,{onClick:t.onClose},{default:(0,r.w5)((()=>[tl])),_:1},8,["onClick"]),(0,r.Wm)(f,{primary:"",onClick:t.onReset},{default:(0,r.w5)((()=>[al])),_:1},8,["onClick"])])),default:(0,r.w5)((()=>[(0,r.Wm)(g,{gap:"24px"},{default:(0,r.w5)((()=>[(0,r.Wm)(g,{gap:"24px"},{default:(0,r.w5)((()=>[(0,r.Wm)(c,{title:"レート"},{default:(0,r.w5)((()=>[(0,r.Wm)(u,{columns:["max-content","1fr","max-content"]},{default:(0,r.w5)((()=>[(0,r.Wm)(s,null,{default:(0,r.w5)((()=>[Xe])),_:1}),(0,r.Wm)(d,{modelValue:t.model.rate,"onUpdate:modelValue":l[0]||(l[0]=e=>t.model.rate=e),modelModifiers:{number:!0,lazy:!0},type:"tel",align:"right",onBlur:t.onBlur},null,8,["modelValue","onBlur"]),(0,r.Wm)(s,null,{default:(0,r.w5)((()=>[Qe])),_:1})])),_:1})])),_:1}),(0,r.Wm)(c,{title:"チップ"},{default:(0,r.w5)((()=>[(0,r.Wm)(u,{columns:["max-content","1fr","max-content"]},{default:(0,r.w5)((()=>[(0,r.Wm)(s,null,{default:(0,r.w5)((()=>[el])),_:1}),(0,r.Wm)(d,{modelValue:t.model.chipRate,"onUpdate:modelValue":l[1]||(l[1]=e=>t.model.chipRate=e),modelModifiers:{number:!0,lazy:!0},align:"right",onBlur:t.onBlurChipRate},null,8,["modelValue","onBlur"]),(0,r.Wm)(s,null,{default:(0,r.w5)((()=>[ll])),_:1})])),_:1})])),_:1}),(0,r.Wm)(c,{title:"結果"},{default:(0,r.w5)((()=>[(0,r._)("table",null,[((0,r.wg)(!0),(0,r.iD)(r.HY,null,(0,r.Ko)(t.results,(({player:e,price:l},o)=>((0,r.wg)(),(0,r.iD)("tr",{key:o,class:"bold"},[(0,r._)("th",null,(0,i.zw)(e),1),(0,r._)("td",{class:(0,i.C_)({minus:l<0})},(0,i.zw)(l.toLocaleString())+"円",3)])))),128))])])),_:1}),(0,r.Wm)(c,{title:"シェア"},{default:(0,r.w5)((()=>[(0,r.Wm)(u,null,{default:(0,r.w5)((()=>[(0,r.Wm)(p,{modelValue:t.editable,"onUpdate:modelValue":l[2]||(l[2]=e=>t.editable=e),name:"editable"},{default:(0,r.w5)((()=>[ol])),_:1},8,["modelValue"]),(0,r.Wm)(f,{small:"",onClick:t.onShare},{default:(0,r.w5)((()=>[(0,r.Wm)(m)])),_:1},8,["onClick"])])),_:1})])),_:1}),(0,r.Wm)(c,{title:"画像で出力"},{default:(0,r.w5)((()=>[(0,r.Wm)(u,null,{default:(0,r.w5)((()=>[(0,r.Wm)(d,{modelValue:t.model.fileName,"onUpdate:modelValue":l[3]||(l[3]=e=>t.model.fileName=e),placeholder:"Please file name..."},null,8,["modelValue"]),(0,r.Wm)(f,{small:"",onClick:t.onDownload},{default:(0,r.w5)((()=>[(0,r.Wm)(y)])),_:1},8,["onClick"])])),_:1})])),_:1})])),_:1})])),_:1})])),_:1},8,["onClose"])}var nl=o(536),sl=o(2269),il=o.n(sl),dl=o(7359),ul=o(829);const cl={class:"switch"},pl=["for"],ml=["id","value"],fl=["for"];function yl(e,l,o,t,a,n){return(0,r.wg)(),(0,r.iD)("div",cl,[(0,r._)("label",{for:o.name},[(0,r.WI)(e.$slots,"default",{},void 0,!0)],8,pl),(0,r._)("input",{id:o.name,type:"checkbox",value:o.modelValue,onInput:l[0]||(l[0]=l=>e.$emit("update:modelValue",l.target.checked))},null,40,ml),(0,r._)("label",{class:"button",for:o.name},null,8,fl)])}var gl={name:"Switch",inheritAttrs:!1,emits:["update:modelValue"],props:{modelValue:{type:Boolean,required:!0},name:{type:String,required:!0}}};const hl=(0,S.Z)(gl,[["render",yl],["__scopeId","data-v-2c715a90"]]);var wl=hl,vl={name:"ResultModal",components:{DownloadIcon:dl.Z,ShareIcon:ul.Z,Button:Z,FormField:ye,Grid:K,Label:ee,Switch:wl,TextInput:_e,FormGroup:Se,ModalBase:Ue},props:{players:{type:Array,required:!0},scores:{type:Array,required:!0},chips:{type:Array,required:!0},chipRate:{type:Number,required:!0}},setup(e,{emit:l}){const o=(0,y.qj)({rate:50,chipRate:e.chipRate,fileName:""}),t=(0,y.iH)(!1);return{model:o,editable:t,results:(0,r.Fl)((()=>e.players.map(((l,t)=>({player:l,price:e.scores.reduce(((e,l)=>e+l[t]),e.chips[t]*(o.chipRate/1e3))*o.rate}))))),onBlur:()=>!Number.isInteger(o.rate)&&(o.rate=50),onBlurChipRate:()=>(!Number.isInteger(o.chipRate)||o.chipRate%1e3!==0)&&(o.chipRate=e.chipRate),onShare:()=>{const l=new URL(location.pathname,location.href);l.searchParams.set("id",(0,nl.Z)()),l.searchParams.set("datetime",(new Date).getTime()),l.searchParams.set("editable",t.value),l.searchParams.set("players",e.players),l.searchParams.set("scores",e.scores),l.searchParams.set("chips",e.chips),"undefined"===typeof navigator.share?navigator.clipboard?(navigator.clipboard.writeText(l.toString()),alert("コピーしました。")):alert("お使いのブラウザにはクリップボード機能がありません。"):navigator.share({title:"麻雀スコア",text:"",url:l.toString()}),(0,a.B)("share",{event_label:t.value?"editable":"readonly"})},onDownload:async()=>{const e=document.querySelector("#app");try{e.classList.add("printing");const l=await il()(e),t=document.createElement("a");t.download=`${o.fileName||(new Date).toLocaleString()}.png`,t.href=l.toDataURL("image/png"),t.click()}catch(l){alert("画像の保存に失敗しました。")}finally{e.classList.remove("printing"),(0,a.B)("export-image")}},onReset:()=>l("reset"),onClose:()=>l("close")}}};const _l=(0,S.Z)(vl,[["render",rl],["__scopeId","data-v-2f382566"]]);var kl=_l;const bl=()=>({players:g(4).map(((e,l)=>`プレイヤー${l+1}`)),scores:[g(4)],chips:g(4),chipRate:5e3});var Cl={name:"ScoreTable",components:{Animate:F,Clamp:j,EditChipModal:Ee,EditScoreModal:Je,EditPlayerModal:$e,ResultModal:kl},setup(){const e=bl(),l=(0,y.qj)({players:e.players,scores:e.scores,chips:e.chips,chipRate:e.chipRate}),o=(0,y.qj)({player:!1,score:!1,chip:!1,result:!1,scoreIndex:null}),t=(0,y.iH)(!0);return(0,r.wF)((()=>{const e=e=>{e.scores=e.scores.map((e=>e.map((e=>+e)))),e.chips=e.chips.map((e=>+e)),["players","scores","chips"].map((o=>l[o]=e[o]))};try{const l=new URL(document.location).searchParams;if(l.get("id")){t.value=!!JSON.parse(l.get("editable"));const o=[...l].reduce(((e,[l,o])=>({...e,[l]:o})),{}),a=o.scores.split(","),r=o.players.split(",");if(a.length!==r.length)throw new Error;o.players=o.players.split(","),o.scores=h(a,o.players.length),o.chips=o.chips.split(","),e(o)}else{const l=localStorage.getItem("model");if(l){const o=JSON.parse(l);e(o)}}}catch(o){k(te,{props:{type:"error",message:"データの読み込みに失敗しました。"},target:"#dialog"})}finally{history.replaceState(null,"","/mj-score-board/")}})),(0,r.YP)((()=>l),(()=>{t.value&&localStorage.setItem("model",JSON.stringify({...l,scores:[...l.scores],chips:[...l.chips]}))}),{deep:!0}),(0,r.YP)((()=>l.scores[l.scores.length-1]),(e=>{e.some((e=>0!==e))&&(l.scores=[...l.scores,g(l.players.length)])})),{ANIMATION:I,sum:w,toFormat:v,toSymbol:_,model:l,modal:o,isEditable:t,summaries:(0,r.Fl)((()=>l.scores.reduce(((e,l)=>l.map(((l,o)=>e[o]+=l))),g(l.players.length)).map(((e,o)=>e+l.chips[o]*(l.chipRate/1e3))))),onSaveEditPlayer:({players:e,deleted:t})=>{l.players=e.filter(((e,l)=>!t.includes(l))),l.scores=l.scores.map((e=>e.filter(((e,l)=>!t.includes(l))))),l.chips=l.chips.filter(((e,l)=>!t.includes(l)));const a=l.players.length-l.scores[0].length;0<a&&(l.scores=l.scores.map((e=>[...e,...g(a)])),l.chips=[...l.chips,...g(a)]),o.player=!1},onSaveEditScore:({score:e})=>{l.scores[o.scoreIndex]=e,o.scoreIndex=null,o.score=!1},onSaveEditChip:({chips:e,chipRate:t})=>{l.chips=e,l.chipRate=t,o.chip=!1},onReset:async()=>{if(await k(te,{props:{type:"warning",message:"戦績をクリアします。\nよろしいですか？",cancellable:!0},target:"#dialog"})){const{players:e,scores:t,chips:a,chipRate:r}=bl();l.players=e,l.scores=t,l.chips=a,l.chipRate=r,o.result=!1}}}}};const Il=(0,S.Z)(Cl,[["render",f],["__scopeId","data-v-394c978f"]]);var Wl=Il,Sl={name:"App",components:{ScoreTable:Wl},setup(){s(),(0,a.LV)("/index")}};const xl=(0,S.Z)(Sl,[["render",n]]);var Fl=xl,Bl=o(5431);(0,Bl.z)("/mj-score-board/service-worker.js",{ready(){console.log("App is being served from cache by a service worker.\nFor more details, visit https://goo.gl/AFskqB")},registered(){console.log("Service worker has been registered.")},cached(){console.log("Content has been cached for offline use.")},updatefound(){console.log("New content is downloading.")},updated(){console.log("New content is available; please refresh.")},offline(){console.log("No internet connection found. App is running in offline mode.")},error(e){console.error("Error during service worker registration:",e)}}),(0,t.ri)(Fl).use(a.ZP,{config:{id:"G-0T5K2X816T"}}).mount("#app")}},l={};function o(t){var a=l[t];if(void 0!==a)return a.exports;var r=l[t]={exports:{}};return e[t].call(r.exports,r,r.exports,o),r.exports}o.m=e,function(){var e=[];o.O=function(l,t,a,r){if(!t){var n=1/0;for(u=0;u<e.length;u++){t=e[u][0],a=e[u][1],r=e[u][2];for(var s=!0,i=0;i<t.length;i++)(!1&r||n>=r)&&Object.keys(o.O).every((function(e){return o.O[e](t[i])}))?t.splice(i--,1):(s=!1,r<n&&(n=r));if(s){e.splice(u--,1);var d=a();void 0!==d&&(l=d)}}return l}r=r||0;for(var u=e.length;u>0&&e[u-1][2]>r;u--)e[u]=e[u-1];e[u]=[t,a,r]}}(),function(){o.n=function(e){var l=e&&e.__esModule?function(){return e["default"]}:function(){return e};return o.d(l,{a:l}),l}}(),function(){o.d=function(e,l){for(var t in l)o.o(l,t)&&!o.o(e,t)&&Object.defineProperty(e,t,{enumerable:!0,get:l[t]})}}(),function(){o.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){o.o=function(e,l){return Object.prototype.hasOwnProperty.call(e,l)}}(),function(){var e={826:0};o.O.j=function(l){return 0===e[l]};var l=function(l,t){var a,r,n=t[0],s=t[1],i=t[2],d=0;if(n.some((function(l){return 0!==e[l]}))){for(a in s)o.o(s,a)&&(o.m[a]=s[a]);if(i)var u=i(o)}for(l&&l(t);d<n.length;d++)r=n[d],o.o(e,r)&&e[r]&&e[r][0](),e[r]=0;return o.O(u)},t=self["webpackChunkmj_score_board"]=self["webpackChunkmj_score_board"]||[];t.forEach(l.bind(null,0)),t.push=l.bind(null,t.push.bind(t))}();var t=o.O(void 0,[998],(function(){return o(1647)}));t=o.O(t)})();
//# sourceMappingURL=index.7ed74030.js.map
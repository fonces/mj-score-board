(function(){"use strict";var e={5309:function(e,l,o){var a=o(9242),t=o(3396);function s(e,l,o,a,s,r){const n=(0,t.up)("ScoreTable");return(0,t.wg)(),(0,t.j4)(n)}var r=o(7139);const n=e=>((0,t.dD)("data-v-7306c84c"),e=e(),(0,t.Cn)(),e),i=n((()=>(0,t._)("th",null,null,-1))),c=["onClick"],d=n((()=>(0,t._)("th",null,"チップ",-1))),u=n((()=>(0,t._)("th",null,"合計",-1)));function p(e,l,o,a,s,n){const p=(0,t.up)("Clamp"),m=(0,t.up)("EditPlayerModal"),f=(0,t.up)("EditScoreModal"),h=(0,t.up)("EditChipModal"),y=(0,t.up)("ResultModal");return(0,t.wg)(),(0,t.iD)(t.HY,null,[(0,t._)("table",null,[(0,t._)("thead",null,[(0,t._)("tr",{class:"player",onClick:l[0]||(l[0]=e=>a.modal.player=!0)},[i,((0,t.wg)(!0),(0,t.iD)(t.HY,null,(0,t.Ko)(a.model.players,((e,l)=>((0,t.wg)(),(0,t.iD)("th",{key:l},[(0,t.Wm)(p,null,{default:(0,t.w5)((()=>[(0,t.Uk)((0,r.zw)(e),1)])),_:2},1024)])))),128))])]),(0,t._)("tbody",null,[((0,t.wg)(!0),(0,t.iD)(t.HY,null,(0,t.Ko)(a.model.scores,((e,l)=>((0,t.wg)(),(0,t.iD)("tr",{key:l,class:(0,r.C_)(["score",{diff:a.isDifference(e)}]),onClick:e=>(a.modal.score=!0)&&(a.modal.scoreIndex=l)},[(0,t._)("th",null,(0,r.zw)(l+1)+"回戦",1),((0,t.wg)(!0),(0,t.iD)(t.HY,null,(0,t.Ko)(e,((e,l)=>((0,t.wg)(),(0,t.iD)("td",{key:l},(0,r.zw)(a.toPosiNega(e)),1)))),128))],10,c)))),128)),(0,t._)("tr",{class:(0,r.C_)(["chip",{diff:a.isDifference(a.model.chips)}]),onClick:l[1]||(l[1]=e=>a.modal.chip=!0)},[d,((0,t.wg)(!0),(0,t.iD)(t.HY,null,(0,t.Ko)(a.model.chips,((e,l)=>((0,t.wg)(),(0,t.iD)("td",{key:l},(0,r.zw)(a.toPlusMinus(e))+"枚 ",1)))),128))],2)]),(0,t._)("tfoot",null,[(0,t._)("tr",{class:(0,r.C_)(["summary",{diff:a.isDifference(a.summaries)}]),onClick:l[2]||(l[2]=e=>a.modal.result=!0)},[u,((0,t.wg)(!0),(0,t.iD)(t.HY,null,(0,t.Ko)(a.summaries,((e,l)=>((0,t.wg)(),(0,t.iD)("td",{key:l},(0,r.zw)(a.toPosiNega(e)),1)))),128))],2)])]),((0,t.wg)(),(0,t.j4)(t.lR,{to:"#modal"},[a.isReadOnly?(0,t.kq)("",!0):((0,t.wg)(),(0,t.iD)(t.HY,{key:0},[a.modal.player?((0,t.wg)(),(0,t.j4)(m,{key:0,players:a.model.players,onSave:a.onSaveEditPlayer,onClose:l[3]||(l[3]=e=>a.modal.player=!1)},null,8,["players","onSave"])):(0,t.kq)("",!0),a.modal.score?((0,t.wg)(),(0,t.j4)(f,{key:1,players:a.model.players,score:a.model.scores[a.modal.scoreIndex],"score-index":a.modal.scoreIndex,onSave:a.onSaveEditScore,onClose:l[4]||(l[4]=e=>a.modal.score=!1)},null,8,["players","score","score-index","onSave"])):(0,t.kq)("",!0),a.modal.chip?((0,t.wg)(),(0,t.j4)(h,{key:2,players:a.model.players,chips:a.model.chips,"chip-rate":a.model.chipRate,onSave:a.onSaveEditChip,onClose:l[5]||(l[5]=e=>a.modal.chip=!1)},null,8,["players","chips","chip-rate","onSave"])):(0,t.kq)("",!0),a.modal.result?((0,t.wg)(),(0,t.j4)(y,{key:3,players:a.model.players,scores:a.model.scores,chips:a.model.chips,"chip-rate":a.model.chipRate,onReset:a.onReset,onClose:l[6]||(l[6]=e=>a.modal.result=!1)},null,8,["players","scores","chips","chip-rate","onReset"])):(0,t.kq)("",!0)],64))]))],64)}o(1703),o(6699);var m=o(4870);const f=(e,l=0)=>Array(e).fill(l),h=(e,l)=>Array(e.length/l).fill().map(((o,a)=>e.slice(a*l,(a+1)*l))),y=e=>`${0<e?"△":e<0?"▲":""}${Math.abs(e)}`,v=e=>`${0<e?"+":e<0?"-":""}${Math.abs(e)}`,w=(e,l=0)=>l!==e.reduce(((e,l)=>e+l),0);function g(e,l,o,a,s,n){return(0,t.wg)(),(0,t.iD)("span",{class:"clamp",style:(0,r.j5)({"-webkit-line-clamp":o.line})},[(0,t.WI)(e.$slots,"default",{},void 0,!0)],4)}var _={name:"Clamp",props:{line:{type:Number,default:1}}},C=o(89);const k=(0,C.Z)(_,[["render",g],["__scopeId","data-v-9d661d44"]]);var b=k;const I=(0,t.Uk)("キャンセル"),D=(0,t.Uk)("保存");function R(e,l,o,a,s,n){const i=(0,t.up)("TextInput"),c=(0,t.up)("CrossIcon"),d=(0,t.up)("Item"),u=(0,t.up)("List"),p=(0,t.up)("Button"),m=(0,t.up)("ModalBase");return(0,t.wg)(),(0,t.j4)(m,{class:"edit-player-modal",title:"ユーザー編集",onClose:a.onClose},{footer:(0,t.w5)((()=>[(0,t.Wm)(p,{onClick:a.onClose},{default:(0,t.w5)((()=>[I])),_:1},8,["onClick"]),(0,t.Wm)(p,{primary:"",onClick:a.onSave},{default:(0,t.w5)((()=>[D])),_:1},8,["onClick"])])),default:(0,t.w5)((()=>[(0,t.Wm)(u,{gap:"24px"},{default:(0,t.w5)((()=>[(0,t.Wm)(u,null,{default:(0,t.w5)((()=>[((0,t.wg)(!0),(0,t.iD)(t.HY,null,(0,t.Ko)(a.model.players,((e,l)=>((0,t.wg)(),(0,t.j4)(d,{key:l},{default:(0,t.w5)((()=>[(0,t.Wm)(i,{modelValue:a.model.players[l],"onUpdate:modelValue":e=>a.model.players[l]=e,modelModifiers:{trim:!0},disabled:a.model.deleted.includes(l),placeholder:"Please player Name..."},null,8,["modelValue","onUpdate:modelValue","disabled"]),(0,t.Wm)(c,{class:(0,r.C_)({undeletable:a.model.deleted.includes(l)||a.isLastIndex(l)}),onClick:e=>a.onDelete(l)},null,8,["class","onClick"])])),_:2},1024)))),128))])),_:1})])),_:1})])),_:1},8,["onClose"])}const S={class:"cross"};function W(e,l,o,a,s,r){return(0,t.wg)(),(0,t.iD)("div",S)}var B={name:"CrossIcon"};const x=(0,C.Z)(B,[["render",W],["__scopeId","data-v-dc442882"]]);var V=x;function M(e,l,o,a,s,r){return(0,t.wg)(),(0,t.iD)("button",(0,t.dG)(e.$attrs,{type:"button",class:["button",{primary:o.primary,small:o.small}]}),[(0,t.WI)(e.$slots,"default",{},void 0,!0)],16)}var j={name:"Button",inheritAttrs:!1,props:{primary:{type:Boolean},small:{type:Boolean}}};const q=(0,C.Z)(j,[["render",M],["__scopeId","data-v-30abf6f0"]]);var U=q;const P=["value"];function N(e,l,o,a,s,r){return(0,t.wg)(),(0,t.iD)("input",(0,t.dG)({type:"text",class:"text-input"},e.$attrs,{value:o.modelValue,onInput:l[0]||(l[0]=l=>e.$emit("update:modelValue",l.target.value)),onFocus:l[1]||(l[1]=(...e)=>a.onFocus&&a.onFocus(...e))}),null,16,P)}var A={name:"TextInput",inheritAttrs:!1,props:["modelValue"],emits:["update:modelValue"],setup(e){return{onFocus:l=>l.target.setSelectionRange(0,String(e.modelValue).length)}}};const E=(0,C.Z)(A,[["render",N],["__scopeId","data-v-576f0442"]]);var L=E;function $(e,l,o,a,s,n){return(0,t.wg)(),(0,t.iD)("div",{class:"list",style:(0,r.j5)({gap:o.gap})},[(0,t.WI)(e.$slots,"default",{},void 0,!0)],4)}var O={name:"List",props:{gap:{type:String,default:"12px"}}};const T=(0,C.Z)(O,[["render",$],["__scopeId","data-v-1f10bbfc"]]);var Z=T;const Y={class:"item"};function H(e,l,o,a,s,r){return(0,t.wg)(),(0,t.iD)("div",Y,[(0,t.WI)(e.$slots,"default")])}var z={name:"Item"};const F=(0,C.Z)(z,[["render",H]]);var K=F;const J={class:"modal-base"},G={class:"title"};function Q(e,l,o,a,s,n){const i=(0,t.up)("CrossIcon");return(0,t.wg)(),(0,t.iD)("div",J,[(0,t._)("header",null,[(0,t._)("div",G,(0,r.zw)(o.title),1),(0,t.Wm)(i,{onClick:l[0]||(l[0]=l=>e.$emit("close"))})]),(0,t._)("main",null,[(0,t.WI)(e.$slots,"default",{},void 0,!0)]),(0,t._)("footer",null,[(0,t.WI)(e.$slots,"footer",{},void 0,!0)])])}var X={name:"ModalBase",components:{CrossIcon:V},props:{title:{type:String}}};const ee=(0,C.Z)(X,[["render",Q],["__scopeId","data-v-5d1ee960"]]);var le=ee,oe={name:"EditPlayerModal",components:{CrossIcon:V,Button:U,TextInput:L,List:Z,Item:K,ModalBase:le},props:{players:{type:Array,required:!0}},setup(e,{emit:l}){const o=(0,m.qj)({players:[...e.players,""],deleted:[]}),a=(0,t.Fl)((()=>o.players.length-1)),s=(0,t.Fl)((()=>o.players[a.value]));return(0,t.YP)((()=>s.value),(e=>e&&(o.players=[...o.players,""]))),{model:o,isLastIndex:e=>e===a.value,onDelete:e=>o.deleted=[...o.deleted,e],onClose:()=>l("close"),onSave:()=>l("save",{players:4<o.players.length?[...o.players].slice(0,-1):[...o.players],deleted:[...o.deleted]})}}};const ae=(0,C.Z)(oe,[["render",R],["__scopeId","data-v-3ce17020"]]);var te=ae;const se={class:"actions"},re=(0,t.Uk)("クリア"),ne={key:0,class:"error"},ie={class:"name"},ce={class:"form-field"},de=(0,t.Uk)(" 自動入力 "),ue=(0,t.Uk)("キャンセル"),pe=(0,t.Uk)("保存");function me(e,l,o,a,s,n){const i=(0,t.up)("Button"),c=(0,t.up)("TextInput"),d=(0,t.up)("Item"),u=(0,t.up)("List"),p=(0,t.up)("ModalBase");return(0,t.wg)(),(0,t.j4)(p,{class:"edit-score-modal",title:`スコア編集 - ${o.scoreIndex+1}回戦`,onClose:a.onClose},{footer:(0,t.w5)((()=>[(0,t.Wm)(i,{onClick:a.onClose},{default:(0,t.w5)((()=>[ue])),_:1},8,["onClick"]),(0,t.Wm)(i,{primary:"",disabled:a.isDifference(a.model.score),onClick:a.onSave},{default:(0,t.w5)((()=>[pe])),_:1},8,["disabled","onClick"])])),default:(0,t.w5)((()=>[(0,t.Wm)(u,{gap:"24px"},{default:(0,t.w5)((()=>[(0,t._)("div",se,[(0,t.Wm)(i,{onClick:a.onClear},{default:(0,t.w5)((()=>[re])),_:1},8,["onClick"]),a.isDifference(a.model.score)?((0,t.wg)(),(0,t.iD)("div",ne,(0,r.zw)(a.diff)+"ポイント差分があります",1)):(0,t.kq)("",!0)]),(0,t.Wm)(u,null,{default:(0,t.w5)((()=>[((0,t.wg)(!0),(0,t.iD)(t.HY,null,(0,t.Ko)(o.players,((e,l)=>((0,t.wg)(),(0,t.j4)(d,{key:l},{default:(0,t.w5)((()=>[(0,t._)("div",ie,(0,r.zw)(e),1),(0,t._)("div",ce,[(0,t.Wm)(c,{modelValue:a.model.score[l],"onUpdate:modelValue":e=>a.model.score[l]=e,modelModifiers:{number:!0},onBlur:e=>a.onBlur(l)},null,8,["modelValue","onUpdate:modelValue","onBlur"]),0===a.model.score[l]&&a.isDifference(a.model.score)?((0,t.wg)(),(0,t.j4)(i,{key:0,small:"",class:"auto-input",onClick:e=>a.onAutoComplete(l)},{default:(0,t.w5)((()=>[de])),_:2},1032,["onClick"])):(0,t.kq)("",!0)])])),_:2},1024)))),128))])),_:1})])),_:1})])),_:1},8,["title","onClose"])}var fe={name:"EditScoreModal",components:{Button:U,TextInput:L,List:Z,Item:K,ModalBase:le},props:{players:{type:Array,required:!0},score:{type:Array,required:!0},scoreIndex:{type:Number,required:!0}},setup(e,{emit:l}){const o=(0,m.qj)({score:[...e.score]}),a=(0,t.Fl)((()=>o.score.reduce(((e,l)=>e+ +l),0)));return{isDifference:w,model:o,diff:a,onBlur:e=>!Number.isInteger(o.score[e])&&(o.score[e]=0),onAutoComplete:e=>o.score[e]-=a.value,onClear:()=>o.score=f(e.players.length),onClose:()=>l("close"),onSave:()=>l("save",{score:[...o.score]})}}};const he=(0,C.Z)(fe,[["render",me],["__scopeId","data-v-2bc85bb8"]]);var ye=he;const ve=e=>((0,t.dD)("data-v-6dd50fe2"),e=e(),(0,t.Cn)(),e),we={class:"actions"},ge=(0,t.Uk)("クリア"),_e={key:0,class:"error"},Ce={class:"form-field chip-rate"},ke=ve((()=>(0,t._)("label",null,"チップ1枚",-1))),be=ve((()=>(0,t._)("label",null,"点相当",-1))),Ie={class:"name"},De={class:"form-field"},Re=ve((()=>(0,t._)("label",null,"枚",-1))),Se=(0,t.Uk)(" 自動入力 "),We=(0,t.Uk)("キャンセル"),Be=(0,t.Uk)("保存");function xe(e,l,o,a,s,n){const i=(0,t.up)("Button"),c=(0,t.up)("TextInput"),d=(0,t.up)("Item"),u=(0,t.up)("List"),p=(0,t.up)("ModalBase");return(0,t.wg)(),(0,t.j4)(p,{class:"edit-chips-modal",title:"チップ編集",onClose:a.onClose},{footer:(0,t.w5)((()=>[(0,t.Wm)(i,{onClick:a.onClose},{default:(0,t.w5)((()=>[We])),_:1},8,["onClick"]),(0,t.Wm)(i,{primary:"",disabled:a.isDifference(a.model.chips),onClick:a.onSave},{default:(0,t.w5)((()=>[Be])),_:1},8,["disabled","onClick"])])),default:(0,t.w5)((()=>[(0,t.Wm)(u,{gap:"24px"},{default:(0,t.w5)((()=>[(0,t._)("div",we,[(0,t.Wm)(i,{onClick:a.onClear},{default:(0,t.w5)((()=>[ge])),_:1},8,["onClick"]),a.isDifference(a.model.chips)?((0,t.wg)(),(0,t.iD)("div",_e,(0,r.zw)(a.diff)+"枚差分があります",1)):(0,t.kq)("",!0)]),(0,t._)("div",Ce,[ke,(0,t.Wm)(c,{modelValue:a.model.chipRate,"onUpdate:modelValue":l[0]||(l[0]=e=>a.model.chipRate=e),modelModifiers:{number:!0},type:"tel",onBlur:a.onBlurChipRate},null,8,["modelValue","onBlur"]),be]),(0,t.Wm)(u,null,{default:(0,t.w5)((()=>[((0,t.wg)(!0),(0,t.iD)(t.HY,null,(0,t.Ko)(o.players,((e,l)=>((0,t.wg)(),(0,t.j4)(d,{key:l},{default:(0,t.w5)((()=>[(0,t._)("div",Ie,(0,r.zw)(e),1),(0,t._)("div",De,[(0,t.Wm)(c,{modelValue:a.model.chips[l],"onUpdate:modelValue":e=>a.model.chips[l]=e,modelModifiers:{number:!0},onBlur:e=>a.onBlur(l)},null,8,["modelValue","onUpdate:modelValue","onBlur"]),Re,0===a.model.chips[l]&&a.isDifference(a.model.chips)?((0,t.wg)(),(0,t.j4)(i,{key:0,small:"",class:"auto-input",onClick:e=>a.onAutoComplete(l)},{default:(0,t.w5)((()=>[Se])),_:2},1032,["onClick"])):(0,t.kq)("",!0)])])),_:2},1024)))),128))])),_:1})])),_:1})])),_:1},8,["onClose"])}var Ve={name:"EditChipModal",components:{Button:U,TextInput:L,List:Z,Item:K,ModalBase:le},props:{players:{type:Array,required:!0},chips:{type:Array,required:!0},chipRate:{type:Number,required:!0}},setup(e,{emit:l}){const o=(0,m.qj)({chips:[...e.chips],chipRate:e.chipRate}),a=(0,t.Fl)((()=>o.chips.reduce(((e,l)=>e+ +l),0)));return{isDifference:w,model:o,diff:a,onBlur:e=>!Number.isInteger(o.chips[e])&&(o.chips[e]=0),onBlurChipRate:()=>(!Number.isInteger(o.chipRate)||o.chipRate%1e3!==0)&&(o.chipRate=e.chipRate),onAutoComplete:e=>o.chips[e]-=a.value,onClear:()=>o.chips=f(e.players.length),onClose:()=>l("close"),onSave:()=>l("save",{...o,chips:[...o.chips]})}}};const Me=(0,C.Z)(Ve,[["render",xe],["__scopeId","data-v-6dd50fe2"]]);var je=Me;const qe=e=>((0,t.dD)("data-v-4afacaa8"),e=e(),(0,t.Cn)(),e),Ue=qe((()=>(0,t._)("div",{class:"form-name"},"レート",-1))),Pe={class:"form-group"},Ne=qe((()=>(0,t._)("label",null,"1000点:",-1))),Ae=qe((()=>(0,t._)("label",null,"円",-1))),Ee=qe((()=>(0,t._)("div",{class:"form-name"},"チップ",-1))),Le={class:"form-group"},$e=qe((()=>(0,t._)("label",null,"1枚:",-1))),Oe=qe((()=>(0,t._)("label",null,"点相当",-1))),Te=qe((()=>(0,t._)("div",{class:"form-name"},"結果",-1))),Ze=qe((()=>(0,t._)("div",null,null,-1))),Ye=qe((()=>(0,t._)("div",{class:"form-name"},"その他",-1))),He={class:"share"},ze=qe((()=>(0,t._)("label",null,"編集を許可する",-1))),Fe=(0,t.Uk)("シェア"),Ke={class:"save-image"},Je=(0,t.Uk)("画像化"),Ge=(0,t.Uk)("キャンセル"),Qe=(0,t.Uk)("戦績クリア");function Xe(e,l,o,a,s,n){const i=(0,t.up)("TextInput"),c=(0,t.up)("Item"),d=(0,t.up)("List"),u=(0,t.up)("Switch"),p=(0,t.up)("Button"),m=(0,t.up)("ModalBase");return(0,t.wg)(),(0,t.j4)(m,{class:"result-modal",title:"結果",onClose:a.onClose},{footer:(0,t.w5)((()=>[(0,t.Wm)(p,{onClick:a.onClose},{default:(0,t.w5)((()=>[Ge])),_:1},8,["onClick"]),(0,t.Wm)(p,{primary:"",onClick:a.onReset},{default:(0,t.w5)((()=>[Qe])),_:1},8,["onClick"])])),default:(0,t.w5)((()=>[(0,t.Wm)(d,{gap:"24px"},{default:(0,t.w5)((()=>[(0,t.Wm)(d,{gap:"24px"},{default:(0,t.w5)((()=>[(0,t.Wm)(c,null,{default:(0,t.w5)((()=>[Ue,(0,t._)("div",Pe,[Ne,(0,t.Wm)(i,{modelValue:a.model.rate,"onUpdate:modelValue":l[0]||(l[0]=e=>a.model.rate=e),modelModifiers:{number:!0},type:"tel",class:"text-right",onBlur:a.onBlur},null,8,["modelValue","onBlur"]),Ae])])),_:1}),(0,t.Wm)(c,null,{default:(0,t.w5)((()=>[Ee,(0,t._)("div",Le,[$e,(0,t.Wm)(i,{modelValue:a.model.chipRate,"onUpdate:modelValue":l[1]||(l[1]=e=>a.model.chipRate=e),modelModifiers:{number:!0},class:"text-right",onBlur:a.onBlurChipRate},null,8,["modelValue","onBlur"]),Oe])])),_:1}),(0,t.Wm)(c,null,{default:(0,t.w5)((()=>[Te,(0,t.Wm)(d,null,{default:(0,t.w5)((()=>[((0,t.wg)(!0),(0,t.iD)(t.HY,null,(0,t.Ko)(o.players,((e,l)=>((0,t.wg)(),(0,t.iD)("div",{key:l,class:"form-group"},[(0,t._)("label",null,(0,r.zw)(e),1),Ze,(0,t._)("label",null,(0,r.zw)(a.toPrice(l))+"円",1)])))),128))])),_:1})])),_:1}),(0,t.Wm)(c,null,{default:(0,t.w5)((()=>[Ye,(0,t._)("div",He,[ze,(0,t.Wm)(u,{modelValue:a.editable,"onUpdate:modelValue":l[2]||(l[2]=e=>a.editable=e),name:"editable"},null,8,["modelValue"]),(0,t.Wm)(p,{onClick:a.onShare},{default:(0,t.w5)((()=>[Fe])),_:1},8,["onClick"])]),(0,t._)("div",Ke,[(0,t.Wm)(i,{modelValue:a.model.fileName,"onUpdate:modelValue":l[3]||(l[3]=e=>a.model.fileName=e),placeholder:"ファイル名"},null,8,["modelValue"]),(0,t.Wm)(p,{onClick:a.onDownload},{default:(0,t.w5)((()=>[Je])),_:1},8,["onClick"])])])),_:1})])),_:1})])),_:1})])),_:1},8,["onClose"])}var el=o(536),ll=o(2269),ol=o.n(ll);const al={class:"switch"},tl=["id","value"],sl=["for"];function rl(e,l,o,a,s,r){return(0,t.wg)(),(0,t.iD)("div",al,[(0,t._)("input",{id:o.name,type:"checkbox",value:o.modelValue,onInput:l[0]||(l[0]=l=>e.$emit("update:modelValue",l.target.checked))},null,40,tl),(0,t._)("label",{for:o.name},null,8,sl)])}var nl={name:"Switch",inheritAttrs:!1,emits:["update:modelValue"],props:{modelValue:{type:Boolean,required:!0},name:{type:String,required:!0}}};const il=(0,C.Z)(nl,[["render",rl],["__scopeId","data-v-d485cafc"]]);var cl=il,dl={name:"ResultModal",components:{Button:U,TextInput:L,Switch:cl,List:Z,Item:K,ModalBase:le},props:{players:{type:Array,required:!0},scores:{type:Array,required:!0},chips:{type:Array,required:!0},chipRate:{type:Number,required:!0}},setup(e,{emit:l}){const o=(0,m.qj)({rate:50,chipRate:e.chipRate,fileName:""}),a=(0,m.iH)(!1),t=l=>{const a=e.scores.reduce(((e,o)=>e+o[l]),0)+e.chips[l]*(o.chipRate/1e3);return Number(a*o.rate).toLocaleString()};return{model:o,editable:a,toPrice:t,onBlur:()=>!Number.isInteger(o.rate)&&(o.rate=50),onBlurChipRate:()=>(!Number.isInteger(o.chipRate)||o.chipRate%1e3!==0)&&(o.chipRate=e.chipRate),onShare:()=>{const l=new URL(location.pathname,location.href);l.searchParams.set("id",(0,el.Z)()),l.searchParams.set("datetime",(new Date).getTime()),l.searchParams.set("editable",a.value),l.searchParams.set("players",e.players),l.searchParams.set("scores",e.scores),l.searchParams.set("chips",e.chips),"undefined"===typeof navigator.share?navigator.clipboard?(navigator.clipboard.writeText(l.toString()),alert("コピーしました")):alert("お使いのブラウザにはクリップボード機能がありません。"):navigator.share({title:"麻雀スコア",text:"",url:l.toString()})},onReset:()=>l("reset"),onClose:()=>l("close"),onDownload:async()=>{const e=document.querySelector("#app");try{e.classList.add("printing");const l=await ol()(e),a=document.createElement("a");a.download=`${o.fileName||(new Date).toLocaleString()}.png`,a.href=l.toDataURL("image/png"),a.click()}catch(l){alert("画像の保存に失敗しました。")}finally{e.classList.remove("printing")}}}}};const ul=(0,C.Z)(dl,[["render",Xe],["__scopeId","data-v-4afacaa8"]]);var pl=ul;const ml=()=>({players:f(4).map(((e,l)=>`プレイヤー${l+1}`)),scores:[f(4)],chips:f(4),chipRate:5e3});var fl={name:"ScoreTable",components:{Clamp:b,EditPlayerModal:te,EditScoreModal:ye,EditChipModal:je,ResultModal:pl},setup(){const e=ml(),l=(0,m.iH)(!1),o=(0,m.qj)({players:e.players,scores:e.scores,chips:e.chips,chipRate:e.chipRate}),a=(0,m.qj)({player:!1,score:!1,chip:!1,result:!1,scoreIndex:null}),s=(0,t.Fl)((()=>o.scores.reduce(((e,l)=>l.map(((l,o)=>e[o]+=l))),f(o.players.length)).map(((e,l)=>e+o.chips[l]*(o.chipRate/1e3))))),r=(0,t.Fl)((()=>o.scores[o.scores.length-1]));return(0,t.wF)((()=>{const e=e=>{e.scores=e.scores.map((e=>e.map((e=>+e)))),e.chips=e.chips.map((e=>+e)),["players","scores","chips"].map((l=>o[l]=e[l]))};try{const o=new URL(document.location).searchParams;if(o.get("id")){l.value=!JSON.parse(o.get("editable"));const a=[...o].reduce(((e,[l,o])=>({...e,[l]:o})),{}),t=a.scores.split(","),s=a.players.split(",");if(t.length%s.length)throw new Error;a.players=a.players.split(","),a.scores=h(t,a.players.length),a.chips=a.chips.split(","),e(a)}else{const l=localStorage.getItem("model");if(l){const o=JSON.parse(l);e(o)}}}catch(a){alert("データの読み込みに失敗しました")}})),(0,t.YP)((()=>r.value),(e=>{e.some((e=>0!==e))&&(o.scores=[...o.scores,f(o.players.length)])})),(0,t.YP)((()=>o),(()=>{l.value||localStorage.setItem("model",JSON.stringify({...o,scores:[...o.scores],chips:[...o.chips]}))}),{deep:!0}),{toPosiNega:y,toPlusMinus:v,isDifference:w,model:o,modal:a,summaries:s,isReadOnly:l,onSaveEditPlayer:({players:e,deleted:l})=>{o.players=e.filter(((e,o)=>!l.includes(o))),o.scores=o.scores.map((e=>e.filter(((e,o)=>!l.includes(o))))),o.chips=o.chips.filter(((e,o)=>!l.includes(o)));const t=o.players.length-o.scores[0].length;0<t&&(o.scores=o.scores.map((e=>[...e,...f(t)])),o.chips=[...o.chips,...f(t)]),a.player=!1},onSaveEditScore:({score:e})=>{o.scores[a.scoreIndex]=e,a.scoreIndex=null,a.score=!1},onSaveEditChip:({chips:e,chipRate:l})=>{o.chips=e,o.chipRate=l,a.chip=!1},onReset:()=>{const{players:e,scores:l,chips:t,chipRate:s}=ml();o.players=e,o.scores=l,o.chips=t,o.chipRate=s,a.result=!1}}}};const hl=(0,C.Z)(fl,[["render",p],["__scopeId","data-v-7306c84c"]]);var yl=hl,vl={name:"App",components:{ScoreTable:yl}};const wl=(0,C.Z)(vl,[["render",s]]);var gl=wl;(0,a.ri)(gl).mount("#app")}},l={};function o(a){var t=l[a];if(void 0!==t)return t.exports;var s=l[a]={exports:{}};return e[a].call(s.exports,s,s.exports,o),s.exports}o.m=e,function(){var e=[];o.O=function(l,a,t,s){if(!a){var r=1/0;for(d=0;d<e.length;d++){a=e[d][0],t=e[d][1],s=e[d][2];for(var n=!0,i=0;i<a.length;i++)(!1&s||r>=s)&&Object.keys(o.O).every((function(e){return o.O[e](a[i])}))?a.splice(i--,1):(n=!1,s<r&&(r=s));if(n){e.splice(d--,1);var c=t();void 0!==c&&(l=c)}}return l}s=s||0;for(var d=e.length;d>0&&e[d-1][2]>s;d--)e[d]=e[d-1];e[d]=[a,t,s]}}(),function(){o.n=function(e){var l=e&&e.__esModule?function(){return e["default"]}:function(){return e};return o.d(l,{a:l}),l}}(),function(){o.d=function(e,l){for(var a in l)o.o(l,a)&&!o.o(e,a)&&Object.defineProperty(e,a,{enumerable:!0,get:l[a]})}}(),function(){o.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){o.o=function(e,l){return Object.prototype.hasOwnProperty.call(e,l)}}(),function(){var e={826:0};o.O.j=function(l){return 0===e[l]};var l=function(l,a){var t,s,r=a[0],n=a[1],i=a[2],c=0;if(r.some((function(l){return 0!==e[l]}))){for(t in n)o.o(n,t)&&(o.m[t]=n[t]);if(i)var d=i(o)}for(l&&l(a);c<r.length;c++)s=r[c],o.o(e,s)&&e[s]&&e[s][0](),e[s]=0;return o.O(d)},a=self["webpackChunkmj_score_board"]=self["webpackChunkmj_score_board"]||[];a.forEach(l.bind(null,0)),a.push=l.bind(null,a.push.bind(a))}();var a=o.O(void 0,[998],(function(){return o(5309)}));a=o.O(a)})();
//# sourceMappingURL=index.6181f06f.js.map